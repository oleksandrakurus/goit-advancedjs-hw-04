{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '50500162-d9264b458cdacee071354b362';\nconst BASE_URL = 'https://pixabay.com/api/';\n\n/**\n * Searches for images using Pixabay API with pagination support\n * @param {string} query - Search query\n * @param {number} page - Page number (default: 1)\n * @param {number} perPage - Number of images per page (default: 15)\n * @returns {Promise} - Promise that resolves to the API response\n */\nexport async function searchImages(query, page = 1, perPage = 15) {\n  const searchParams = {\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    page,\n    per_page: perPage,\n    min_width: 640,\n    min_height: 480,\n  };\n\n  try {\n    const response = await axios.get(BASE_URL, { params: searchParams });\n    const data = response.data;\n\n    if (data.hits.length === 0) {\n      throw new Error('No images found');\n    }\n\n    return data;\n  } catch (error) {\n    throw error;\n  }\n}\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n/**\n * Creates HTML markup for a single image card\n * @param {Object} image - Image data from Pixabay API\n * @returns {string} - HTML string for the image card\n */\nexport function createImageCard(image) {\n  return `\n    <li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n        <img\n          class=\"gallery-image\"\n          src=\"${image.webformatURL}\"\n          alt=\"${image.tags}\"\n          loading=\"lazy\"\n        />\n        <div class=\"info\">\n          <div class=\"info-item\">\n            <span class=\"info-label\">Likes</span>\n            <span class=\"info-value\">${image.likes}</span>\n          </div>\n          <div class=\"info-item\">\n            <span class=\"info-label\">Views</span>\n            <span class=\"info-value\">${image.views}</span>\n          </div>\n          <div class=\"info-item\">\n            <span class=\"info-label\">Comments</span>\n            <span class=\"info-value\">${image.comments}</span>\n          </div>\n          <div class=\"info-item\">\n            <span class=\"info-label\">Downloads</span>\n            <span class=\"info-value\">${image.downloads}</span>\n          </div>\n        </div>\n      </a>\n    </li>\n  `;\n}\n\n/**\n * Renders images to the gallery\n * @param {Array} images - Array of image objects from Pixabay API\n * @param {HTMLElement} galleryElement - Gallery container element\n */\nexport function renderImages(images, galleryElement) {\n  const markup = images.map(createImageCard).join('');\n  galleryElement.insertAdjacentHTML('beforeend', markup);\n}\n\n/**\n * Clears the gallery content\n * @param {HTMLElement} galleryElement - Gallery container element\n */\nexport function clearGallery(galleryElement) {\n  galleryElement.innerHTML = '';\n}\n\n/**\n * Shows the loading indicator\n * @param {HTMLElement} loaderElement - Loader element\n */\nexport function showLoader(loaderElement) {\n  loaderElement.style.display = 'flex';\n}\n\n/**\n * Hides the loading indicator\n * @param {HTMLElement} loaderElement - Loader element\n */\nexport function hideLoader(loaderElement) {\n  loaderElement.style.display = 'none';\n}\n\n/**\n * Shows error message using iziToast\n * @param {string} message - Error message to display\n */\nexport function showErrorMessage(message) {\n  iziToast.error({\n    title: 'Error',\n    message: message,\n    position: 'topRight',\n    timeout: 5000,\n  });\n}\n\n/**\n * Shows success message using iziToast\n * @param {string} message - Success message to display\n */\nexport function showSuccessMessage(message) {\n  iziToast.success({\n    title: 'Success',\n    message: message,\n    position: 'topRight',\n    timeout: 3000,\n  });\n}\n\n/**\n * Shows the \"Load more\" button\n * @param {HTMLElement} buttonElement - Load more button element\n */\nexport function showLoadMoreButton(buttonElement) {\n  buttonElement.style.display = 'block';\n}\n\n/**\n * Hides the \"Load more\" button\n * @param {HTMLElement} buttonElement - Load more button element\n */\nexport function hideLoadMoreButton(buttonElement) {\n  buttonElement.style.display = 'none';\n}\n\n/**\n * Shows end of results message\n */\nexport function showEndOfResultsMessage() {\n  iziToast.info({\n    title: 'End of Results',\n    message: \"We're sorry, but you've reached the end of search results.\",\n    position: 'topRight',\n    timeout: 5000,\n  });\n}\n\n/**\n * Smooth scroll to new images\n * @param {HTMLElement} galleryElement - Gallery container element\n */\nexport function smoothScrollToNewImages(galleryElement) {\n  const galleryItem = galleryElement.querySelector('.gallery-item');\n  if (galleryItem) {\n    const cardHeight = galleryItem.getBoundingClientRect().height;\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth'\n    });\n  }\n}\n","// Import necessary modules\nimport { searchImages } from './js/pixabay-api.js';\nimport {\n  renderImages,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showErrorMessage,\n  showSuccessMessage,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n  showEndOfResultsMessage,\n  smoothScrollToNewImages,\n} from './js/render-functions.js';\n\n// Import SimpleLightbox\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n// Get DOM elements\nconst searchForm = document.getElementById('search-form');\nconst searchInput = searchForm.querySelector('input[name=\"searchQuery\"]');\nconst gallery = document.getElementById('gallery');\nconst loader = document.getElementById('loader');\nconst loadMoreBtn = document.getElementById('load-more-btn');\n\n// Global variables for pagination\nlet currentQuery = '';\nlet currentPage = 1;\nlet totalHits = 0;\nconst perPage = 15;\n\n// Initialize SimpleLightbox\nlet lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\n// Event listeners\nsearchForm.addEventListener('submit', handleSearch);\nloadMoreBtn.addEventListener('click', handleLoadMore);\n\n/**\n * Handles the search form submission\n * @param {Event} event - Form submit event\n */\nasync function handleSearch(event) {\n  event.preventDefault();\n\n  const query = searchInput.value.trim();\n\n  // Validate input\n  if (!query) {\n    showErrorMessage('Please enter a search query!');\n    return;\n  }\n\n  // Reset pagination variables\n  currentQuery = query;\n  currentPage = 1;\n  totalHits = 0;\n\n  // Clear previous results and hide load more button\n  clearGallery(gallery);\n  hideLoadMoreButton(loadMoreBtn);\n\n  // Show loader\n  showLoader(loader);\n\n  try {\n    // Perform search\n    const data = await searchImages(query, currentPage, perPage);\n\n    // Hide loader\n    hideLoader(loader);\n\n    // Update total hits\n    totalHits = data.totalHits;\n\n    // Render images\n    renderImages(data.hits, gallery);\n\n    // Refresh SimpleLightbox\n    lightbox.refresh();\n\n    // Show success message\n    showSuccessMessage(`Found ${totalHits} images!`);\n\n    // Show load more button if there are more images\n    const totalPages = Math.ceil(totalHits / perPage);\n    if (currentPage < totalPages) {\n      showLoadMoreButton(loadMoreBtn);\n    }\n\n    // Clear the search input\n    searchInput.value = '';\n\n  } catch (error) {\n    // Hide loader\n    hideLoader(loader);\n\n    // Show error message\n    if (error.message === 'No images found') {\n      showErrorMessage('Sorry, there are no images matching your search query. Please try again!');\n    } else {\n      showErrorMessage('Something went wrong. Please try again later.');\n      console.error('Search error:', error);\n    }\n  }\n}\n\n/**\n * Handles loading more images\n */\nasync function handleLoadMore() {\n  // Increment page\n  currentPage += 1;\n\n  // Show loader\n  showLoader(loader);\n\n  try {\n    // Load more images\n    const data = await searchImages(currentQuery, currentPage, perPage);\n\n    // Hide loader\n    hideLoader(loader);\n\n    // Render new images\n    renderImages(data.hits, gallery);\n\n    // Refresh SimpleLightbox\n    lightbox.refresh();\n\n    // Smooth scroll to new images\n    smoothScrollToNewImages(gallery);\n\n    // Check if we've reached the end\n    const totalPages = Math.ceil(totalHits / perPage);\n    if (currentPage >= totalPages) {\n      hideLoadMoreButton(loadMoreBtn);\n      showEndOfResultsMessage();\n    }\n\n  } catch (error) {\n    // Hide loader\n    hideLoader(loader);\n\n    // Show error message\n    showErrorMessage('Failed to load more images. Please try again.');\n    console.error('Load more error:', error);\n\n    // Revert page increment on error\n    currentPage -= 1;\n  }\n}\n"],"names":["API_KEY","BASE_URL","searchImages","query","page","perPage","searchParams","data","axios","error","createImageCard","image","renderImages","images","galleryElement","markup","clearGallery","showLoader","loaderElement","hideLoader","showErrorMessage","message","iziToast","showSuccessMessage","showLoadMoreButton","buttonElement","hideLoadMoreButton","showEndOfResultsMessage","smoothScrollToNewImages","galleryItem","cardHeight","searchForm","searchInput","gallery","loader","loadMoreBtn","currentQuery","currentPage","totalHits","lightbox","SimpleLightbox","handleSearch","handleLoadMore","event","totalPages"],"mappings":"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"}